[color]
  ui = auto
[core]
  whitespace=fix,-indent-with-non-tab,trailing-space,cr-at-eol
  excludesfile = ~/.config/git/ignore
  hooksPath = ~/.config/git/hooks
[alias]
  co = checkout
  cp = cherry-pick
  # git lastbranch: quickly checks out the last branch. Nice for switching back and forth between branches.
  lastbranch = checkout -
  lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --
  lol = log --graph --decorate --pretty=oneline --abbrev-commit
  lola = log --graph --decorate --pretty=oneline --abbrev-commit --all
  nb = checkout -b
  # git pr: quickly copies a special formatted git log to be pasted into a PR description.
  pr = "!sh -c 'base=$0 && output=$(git log $base..HEAD --pretty=tformat:\"- %h _%s_\" | tail -r) && echo \"$output\" && echo \"$output\" | pbcopy'"
  unstage = reset
  recent = for-each-ref --count=10 --sort=-committerdate refs/heads/ --format="%(refname:short)"
  pf = push --force-with-lease
  br = branch
  # git wipdiff: quickly diffs the current branch against the base branch.
  wipdiff = "!sh -c 'base=$(git rev-parse --abbrev-ref origin/HEAD 2>/dev/null | sed \"s|origin/||\" 2>/dev/null || (git show-ref --verify --quiet refs/heads/main 2>/dev/null && echo main) || echo master) && git diff $base..'"
[mergetool]
  keepBackup = true
[user]
  name = DP
  email = git@dakotahpena.dev
  signingkey = 361ACF45238D9AAF
[push]
  default = current
[filter "lfs"]
  clean = git-lfs clean -- %f
  smudge = git-lfs smudge -- %f
  process = git-lfs filter-process
  required = true
[pull]
  rebase = true
[rerere]
  enabled = true
[init]
  defaultBranch = master
[commit]
  template = ~/.config/git/commit-template.txt
  gpgsign = true
[pager]
  branch = false
  tag = false
[tag]
  gpgSign = true

#
# Allows for a local machine override. Legacy functionality now that
# the git config is in ~/.config/git/ and work config below.
#
[include]
  path = ~/.gitconfig.local

#
# Allows for an easy work machine override, as long as work repos
# are checked out in the ~/Code/work directory. Useful mostly for
# overriding the user details like name, email, and signing key.
#
[includeIf "gitdir:~/Code/work/"]
  path = ~/.config/git/config-work
